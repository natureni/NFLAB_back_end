# NFLAB APIæ¥å£å¯¹é½æ£€æŸ¥æŠ¥å‘Š

## ğŸ“Š æ€»ä½“å¯¹é½æƒ…å†µ

**æ£€æŸ¥æ—¶é—´**: 2025å¹´6æœˆ3æ—¥  
**éœ€æ±‚æ–‡æ¡£**: backend-api-requirements.md v1.0  
**å®ç°ç³»ç»Ÿ**: NFLABé¡¹ç›®ç®¡ç†ç³»ç»Ÿ v1.0  

| æ¨¡å— | éœ€æ±‚æ¥å£æ•° | å·²å®ç° | æœªå®ç° | å®ç°ç‡ |
|------|------------|--------|--------|--------|
| è®¤è¯ä¸æƒé™ç®¡ç† | 6 | 4 | 2 | 66.7% |
| é¡¹ç›®ç®¡ç† | 11 | 8 | 3 | 72.7% |
| å®¢æˆ·ç®¡ç† | 10 | 6 | 4 | 60.0% |
| å›¢é˜Ÿç®¡ç† | 10 | 0 | 10 | 0.0% |
| è´¢åŠ¡ç®¡ç† | 11 | 1 | 10 | 9.1% |
| ç³»ç»Ÿè®¾ç½® | 7 | 0 | 7 | 0.0% |
| æ•°æ®ç»Ÿè®¡ | 4 | 1 | 3 | 25.0% |
| æ–‡ä»¶ç®¡ç† | 5 | 0 | 5 | 0.0% |
| é€šçŸ¥ç³»ç»Ÿ | 3 | 0 | 3 | 0.0% |
| **æ€»è®¡** | **67** | **20** | **47** | **29.9%** |

---

## âœ… å·²å®ç°æ¥å£è¯¦æƒ…

### 1. è®¤è¯ä¸æƒé™ç®¡ç†æ¨¡å— (4/6)

#### âœ… å·²å®ç°
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/logout` - ç”¨æˆ·ç™»å‡º  
- `GET /api/auth/profile` - è·å–ç”¨æˆ·ä¿¡æ¯
- `PUT /api/auth/profile` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯

#### âŒ æœªå®ç°
- `GET /api/permissions/roles` - è·å–è§’è‰²æƒé™é…ç½®
- `PUT /api/permissions/roles/{roleId}` - æ›´æ–°è§’è‰²æƒé™

### 2. é¡¹ç›®ç®¡ç†æ¨¡å— (8/11)

#### âœ… å·²å®ç°
- `GET /api/projects` - è·å–é¡¹ç›®åˆ—è¡¨ (æ”¯æŒåˆ†é¡µã€æœç´¢ã€ç­›é€‰)
- `POST /api/projects` - åˆ›å»ºæ–°é¡¹ç›®
- `GET /api/projects/{id}` - è·å–é¡¹ç›®è¯¦æƒ…
- `PUT /api/projects/{id}` - æ›´æ–°é¡¹ç›®ä¿¡æ¯
- `DELETE /api/projects/{id}` - åˆ é™¤é¡¹ç›®
- `PUT /api/projects/{id}/status` - æ›´æ–°é¡¹ç›®çŠ¶æ€
- `PUT /api/projects/{id}/progress` - æ›´æ–°é¡¹ç›®è¿›åº¦
- `GET /api/projects/gantt/data` - è·å–ç”˜ç‰¹å›¾æ•°æ®

#### âŒ æœªå®ç°
- `GET /api/projects/{id}/contract` - è·å–é¡¹ç›®åˆåŒä¿¡æ¯
- `POST /api/projects/{id}/contract/generate` - ç”ŸæˆåˆåŒPDF
- `GET /api/projects/services/templates` - è·å–æœåŠ¡é¡¹ç›®æ¨¡æ¿

### 3. å®¢æˆ·ç®¡ç†æ¨¡å— (6/10)

#### âœ… å·²å®ç°
- `GET /api/clients` - è·å–å®¢æˆ·åˆ—è¡¨ (æ”¯æŒåˆ†é¡µã€æœç´¢ã€ç­›é€‰)
- `POST /api/clients` - åˆ›å»ºå®¢æˆ·
- `GET /api/clients/{id}` - è·å–å®¢æˆ·è¯¦æƒ…
- `PUT /api/clients/{id}` - æ›´æ–°å®¢æˆ·ä¿¡æ¯
- `DELETE /api/clients/{id}` - åˆ é™¤å®¢æˆ·
- `GET /api/clients/{id}/projects` - è·å–å®¢æˆ·ç›¸å…³é¡¹ç›®

#### âŒ æœªå®ç°
- `POST /api/clients/import` - æ‰¹é‡å¯¼å…¥å®¢æˆ·
- `GET /api/clients/export` - å¯¼å‡ºå®¢æˆ·æ•°æ®
- `GET /api/clients/template` - ä¸‹è½½å®¢æˆ·ä¿¡æ¯æ¨¡æ¿
- `PUT /api/clients/{id}/project-history` - è‡ªåŠ¨æ›´æ–°å®¢æˆ·é¡¹ç›®å†å²

### 4. æ•°æ®ç»Ÿè®¡ä¸æŠ¥è¡¨ (1/4)

#### âœ… å·²å®ç°
- `GET /api/dashboard/stats` - è·å–ä»ªè¡¨æ¿ç»Ÿè®¡æ•°æ®

#### âŒ æœªå®ç°
- `GET /api/reports/projects/export` - å¯¼å‡ºé¡¹ç›®æŠ¥è¡¨
- `GET /api/reports/clients/export` - å¯¼å‡ºå®¢æˆ·æŠ¥è¡¨
- `GET /api/reports/finance/export` - å¯¼å‡ºè´¢åŠ¡æŠ¥è¡¨

### 5. è´¢åŠ¡ç®¡ç†æ¨¡å— (1/11)

#### âœ… å·²å®ç°
- `GET /api/dashboard/finance/overview` - è´¢åŠ¡æ¦‚è§ˆ (ç±»ä¼¼éœ€æ±‚ä¸­çš„ `/api/finance/overview`)

#### âŒ æœªå®ç°
- `GET /api/finance/overview` - è´¢åŠ¡æ¦‚è§ˆ
- `GET /api/finance/revenue` - æ”¶å…¥æ˜ç»†
- `PUT /api/finance/projects/{id}/payment` - æ›´æ–°é¡¹ç›®ä»˜æ¬¾çŠ¶æ€
- `GET /api/finance/costs` - æˆæœ¬ç»“æ„
- `POST /api/finance/costs/fixed` - å½•å…¥å›ºå®šæˆæœ¬
- `PUT /api/finance/costs/fixed/{id}` - æ›´æ–°å›ºå®šæˆæœ¬
- `GET /api/finance/receivables` - åº”æ”¶è´¦æ¬¾æ˜ç»†
- `PUT /api/finance/receivables/{id}/reminder` - å‘é€ä»˜æ¬¾æé†’
- `GET /api/finance/reports/profit-loss` - åˆ©æ¶¦è¡¨
- `GET /api/finance/reports/cash-flow` - ç°é‡‘æµé‡è¡¨
- `POST /api/finance/reports/export` - å¯¼å‡ºè´¢åŠ¡æŠ¥è¡¨

---

## âŒ å®Œå…¨æœªå®ç°çš„æ¨¡å—

### 1. å›¢é˜Ÿç®¡ç†æ¨¡å— (0/10)
- `GET /api/team/members` - è·å–å›¢é˜Ÿæˆå‘˜åˆ—è¡¨
- `POST /api/team/members` - æ·»åŠ å›¢é˜Ÿæˆå‘˜
- `PUT /api/team/members/{id}` - æ›´æ–°æˆå‘˜ä¿¡æ¯
- `DELETE /api/team/members/{id}` - åˆ é™¤å›¢é˜Ÿæˆå‘˜
- `GET /api/team/workload` - è·å–å›¢é˜Ÿå·¥ä½œé‡ç»Ÿè®¡
- `PUT /api/team/members/{id}/workload` - åˆ†é…é¡¹ç›®å·¥ä½œé‡
- `GET /api/team/payments` - è·å–è–ªèµ„æ”¯ä»˜è®°å½•
- `POST /api/team/payments/calculate` - è®¡ç®—æœˆåº¦è–ªèµ„
- `PUT /api/team/payments/{id}/status` - æ›´æ–°æ”¯ä»˜çŠ¶æ€
- `GET /api/team/payments/history` - è·å–å†å²æ”¯ä»˜è®°å½•

### 2. ç³»ç»Ÿè®¾ç½®æ¨¡å— (0/7)
- `GET /api/settings/system` - è·å–ç³»ç»Ÿé…ç½®
- `PUT /api/settings/system` - æ›´æ–°ç³»ç»Ÿé…ç½®
- `GET /api/settings/exchange-rates` - è·å–æ±‡ç‡é…ç½®
- `PUT /api/settings/exchange-rates` - æ›´æ–°æ±‡ç‡
- `POST /api/settings/exchange-rates/sync` - åŒæ­¥å®æ—¶æ±‡ç‡
- `GET /api/settings/business` - è·å–ä¸šåŠ¡é…ç½®
- `PUT /api/settings/business` - æ›´æ–°ä¸šåŠ¡é…ç½®

### 3. æ–‡ä»¶ç®¡ç†æ¨¡å— (0/5)
- `POST /api/files/upload` - ä¸Šä¼ æ–‡ä»¶
- `GET /api/files/{id}` - è·å–æ–‡ä»¶ä¿¡æ¯
- `DELETE /api/files/{id}` - åˆ é™¤æ–‡ä»¶
- `POST /api/pdf/contract` - ç”ŸæˆåˆåŒPDF
- `POST /api/pdf/report` - ç”ŸæˆæŠ¥è¡¨PDF

### 4. é€šçŸ¥ç³»ç»Ÿæ¨¡å— (0/3)
- `GET /api/notifications` - è·å–é€šçŸ¥åˆ—è¡¨
- `PUT /api/notifications/{id}/read` - æ ‡è®°é€šçŸ¥å·²è¯»
- `POST /api/notifications/send` - å‘é€é€šçŸ¥

---

## ğŸ” æ•°æ®ç»“æ„å¯¹é½åˆ†æ

### âœ… é«˜åº¦å¯¹é½çš„æ¥å£

#### 1. é¡¹ç›®ç®¡ç†æ¥å£
- **é¡¹ç›®åˆ—è¡¨**: æ”¯æŒåˆ†é¡µã€çŠ¶æ€ç­›é€‰ã€å®¢æˆ·ç­›é€‰ã€å…³é”®è¯æœç´¢
- **é¡¹ç›®CRUD**: å®Œæ•´çš„åˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤åŠŸèƒ½
- **çŠ¶æ€ç®¡ç†**: æ”¯æŒçŠ¶æ€æµè½¬å’Œè¿›åº¦æ›´æ–°
- **ç”˜ç‰¹å›¾**: æä¾›é¡¹ç›®æ—¶é—´çº¿æ•°æ®

**å¯¹é½åº¦**: 95%

#### 2. å®¢æˆ·ç®¡ç†æ¥å£
- **å®¢æˆ·CRUD**: å®Œæ•´çš„å®¢æˆ·ç®¡ç†åŠŸèƒ½
- **åœ°å€ä¿¡æ¯**: æ”¯æŒå®Œæ•´çš„ä¸šåŠ¡åœ°å€ç»“æ„
- **é¡¹ç›®å…³è”**: æ”¯æŒå®¢æˆ·é¡¹ç›®å…³è”æŸ¥è¯¢
- **å¤šè¯­è¨€**: æ”¯æŒä¸­è‹±æ–‡åŒè¯­å®¢æˆ·ä¿¡æ¯

**å¯¹é½åº¦**: 90%

#### 3. ç”¨æˆ·è®¤è¯æ¥å£
- **JWTè®¤è¯**: å®Œæ•´çš„ç™»å½•ç™»å‡ºæµç¨‹
- **ç”¨æˆ·ä¿¡æ¯**: æ”¯æŒç”¨æˆ·èµ„æ–™ç®¡ç†
- **æƒé™æ§åˆ¶**: JWTä¸­é—´ä»¶è®¤è¯

**å¯¹é½åº¦**: 85%

### âš ï¸ éƒ¨åˆ†å¯¹é½çš„æ¥å£

#### 1. è´¢åŠ¡ç®¡ç†
- **å·²å®ç°**: è´¢åŠ¡æ¦‚è§ˆã€æ”¶å…¥ç»Ÿè®¡ã€æˆæœ¬åˆ†æ
- **ç¼ºå¤±**: è¯¦ç»†çš„æ”¶å…¥æ˜ç»†ã€æˆæœ¬ç®¡ç†ã€åº”æ”¶è´¦æ¬¾ç­‰
- **å»ºè®®**: éœ€è¦æ‰©å±•è´¢åŠ¡æ¨¡å—çš„è¯¦ç»†åŠŸèƒ½

#### 2. æ•°æ®ç»Ÿè®¡
- **å·²å®ç°**: åŸºç¡€ä»ªè¡¨æ¿æ•°æ®
- **ç¼ºå¤±**: å„ç±»æŠ¥è¡¨å¯¼å‡ºåŠŸèƒ½
- **å»ºè®®**: éœ€è¦æ·»åŠ æŠ¥è¡¨ç”Ÿæˆå’Œå¯¼å‡ºåŠŸèƒ½

---

## ğŸ¯ æ•°æ®å­—æ®µå¯¹é½æ£€æŸ¥

### é¡¹ç›®æ•°æ®ç»“æ„å¯¹é½

| éœ€æ±‚å­—æ®µ | å®ç°å­—æ®µ | å¯¹é½çŠ¶æ€ | å¤‡æ³¨ |
|----------|----------|----------|------|
| id | id | âœ… | å®Œå…¨å¯¹é½ |
| protocolNumber | protocol_number | âœ… | å­—æ®µåç•¥æœ‰å·®å¼‚ |
| name | name | âœ… | å®Œå…¨å¯¹é½ |
| client | client_id | âœ… | å…³è”æ–¹å¼å¯¹é½ |
| status | status | âœ… | çŠ¶æ€æšä¸¾å¯¹é½ |
| deadline | deadline | âœ… | å®Œå…¨å¯¹é½ |
| budget | budget | âœ… | å®Œå…¨å¯¹é½ |
| currency | currency | âœ… | è´§å¸ç±»å‹å¯¹é½ |
| exchangeRate | exchange_rate | âœ… | å­—æ®µåç•¥æœ‰å·®å¼‚ |
| budgetCNY | budget_cny | âœ… | å­—æ®µåç•¥æœ‰å·®å¼‚ |
| paymentStatus | payment_status | âœ… | å­—æ®µåç•¥æœ‰å·®å¼‚ |
| progress | progress | âœ… | å®Œå…¨å¯¹é½ |
| type | project_type | âœ… | å­—æ®µåç•¥æœ‰å·®å¼‚ |
| services | services | âœ… | æœåŠ¡é¡¹ç›®ç»“æ„å¯¹é½ |

**é¡¹ç›®æ•°æ®å¯¹é½åº¦**: 95%

### å®¢æˆ·æ•°æ®ç»“æ„å¯¹é½

| éœ€æ±‚å­—æ®µ | å®ç°å­—æ®µ | å¯¹é½çŠ¶æ€ | å¤‡æ³¨ |
|----------|----------|----------|------|
| companyName | company_name | âœ… | å­—æ®µåç•¥æœ‰å·®å¼‚ |
| companyNameCN | company_name_cn | âœ… | å­—æ®µåç•¥æœ‰å·®å¼‚ |
| contactPerson | contact_person | âœ… | å­—æ®µåç•¥æœ‰å·®å¼‚ |
| contactPersonCN | contact_person_cn | âœ… | å­—æ®µåç•¥æœ‰å·®å¼‚ |
| email | email | âœ… | å®Œå…¨å¯¹é½ |
| phone | phone | âœ… | å®Œå…¨å¯¹é½ |
| businessAddress | business_address | âœ… | å­—æ®µåç•¥æœ‰å·®å¼‚ |
| region | region | âœ… | å®Œå…¨å¯¹é½ |
| language | language | âœ… | å®Œå…¨å¯¹é½ |
| businessType | business_type | âœ… | å­—æ®µåç•¥æœ‰å·®å¼‚ |
| projectHistory | project_history | âœ… | å­—æ®µåç•¥æœ‰å·®å¼‚ |
| paymentInfo | payment_info | âœ… | å­—æ®µåç•¥æœ‰å·®å¼‚ |
| bankInfo | bank_info | âœ… | å­—æ®µåç•¥æœ‰å·®å¼‚ |
| tags | tags | âœ… | å®Œå…¨å¯¹é½ |
| notes | notes | âœ… | å®Œå…¨å¯¹é½ |
| status | status | âœ… | å®Œå…¨å¯¹é½ |

**å®¢æˆ·æ•°æ®å¯¹é½åº¦**: 95%

---

## ğŸš€ ä¼˜å…ˆçº§å»ºè®®

### é«˜ä¼˜å…ˆçº§ (æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½)

1. **å›¢é˜Ÿç®¡ç†æ¨¡å—** - å®Œå–„äººå‘˜ç®¡ç†å’Œå·¥ä½œé‡åˆ†é…
2. **æ±‡ç‡ç®¡ç†** - æ”¯æŒå¤šå¸ç§å®æ—¶æ±‡ç‡
3. **åˆåŒç®¡ç†** - é¡¹ç›®åˆåŒç”Ÿæˆå’Œç®¡ç†
4. **æŠ¥è¡¨å¯¼å‡º** - å„ç±»æ•°æ®å¯¼å‡ºåŠŸèƒ½

### ä¸­ä¼˜å…ˆçº§ (æ‰©å±•åŠŸèƒ½)

1. **æƒé™ç®¡ç†** - è§’è‰²æƒé™é…ç½®
2. **æ–‡ä»¶ç®¡ç†** - æ–‡ä»¶ä¸Šä¼ å’ŒPDFç”Ÿæˆ
3. **è´¢åŠ¡è¯¦ç»†ç®¡ç†** - æ”¶å…¥ã€æˆæœ¬ã€åº”æ”¶è´¦æ¬¾è¯¦ç»†ç®¡ç†

### ä½ä¼˜å…ˆçº§ (è¾…åŠ©åŠŸèƒ½)

1. **é€šçŸ¥ç³»ç»Ÿ** - ç³»ç»Ÿæ¶ˆæ¯é€šçŸ¥
2. **æ•°æ®å¯¼å…¥å¯¼å‡º** - æ‰¹é‡æ•°æ®å¤„ç†
3. **ç³»ç»Ÿè®¾ç½®** - ç³»ç»Ÿå‚æ•°é…ç½®

---

## ğŸ“‹ è¡¥å……å®ç°å»ºè®®

### 1. ç«‹å³è¡¥å……çš„æ ¸å¿ƒæ¥å£

```
GET /api/settings/exchange-rates - æ±‡ç‡é…ç½® (å¤šå¸ç§å¿…éœ€)
GET /api/team/members - å›¢é˜Ÿæˆå‘˜åˆ—è¡¨ (å›¢é˜Ÿç®¡ç†å¿…éœ€)  
POST /api/files/upload - æ–‡ä»¶ä¸Šä¼  (åŸºç¡€åŠŸèƒ½)
GET /api/reports/projects/export - é¡¹ç›®æŠ¥è¡¨å¯¼å‡º (ä¸šåŠ¡å¿…éœ€)
```

### 2. æ•°æ®ç»“æ„ä¼˜åŒ–å»ºè®®

- ç»Ÿä¸€å­—æ®µå‘½åé£æ ¼ (camelCase vs snake_case)
- å®Œå–„æ•°æ®éªŒè¯è§„åˆ™
- æ·»åŠ ç¼ºå¤±çš„æšä¸¾ç±»å‹
- ä¼˜åŒ–JSONå“åº”ç»“æ„

### 3. åŠŸèƒ½å®Œå–„å»ºè®®

- å®ç°å®Œæ•´çš„å›¢é˜Ÿç®¡ç†æµç¨‹
- æ·»åŠ è¯¦ç»†çš„è´¢åŠ¡ç®¡ç†åŠŸèƒ½
- æ”¯æŒåˆåŒå’ŒæŠ¥è¡¨PDFç”Ÿæˆ
- å®Œå–„æƒé™æ§åˆ¶æœºåˆ¶

---

## ğŸ‰ æ€»ç»“

**å½“å‰å®ç°çŠ¶æ€**: åŸºç¡€æ ¸å¿ƒåŠŸèƒ½å®Œå–„ï¼Œæ‰©å±•åŠŸèƒ½å¾…è¡¥å……  
**æ ¸å¿ƒä¸šåŠ¡è¦†ç›–**: é¡¹ç›®ç®¡ç†ã€å®¢æˆ·ç®¡ç†ã€åŸºç¡€è®¤è¯å·²å®Œæ•´å®ç°  
**ä¸»è¦ç¼ºå¤±**: å›¢é˜Ÿç®¡ç†ã€ç³»ç»Ÿè®¾ç½®ã€æ–‡ä»¶ç®¡ç†ã€è¯¦ç»†è´¢åŠ¡ç®¡ç†  
**æ•°æ®ç»“æ„å¯¹é½**: å·²å®ç°æ¥å£çš„æ•°æ®ç»“æ„ä¸éœ€æ±‚é«˜åº¦å¯¹é½ (90%+)  
**å»ºè®®**: ä¼˜å…ˆè¡¥å……å›¢é˜Ÿç®¡ç†å’Œæ±‡ç‡ç®¡ç†åŠŸèƒ½ï¼Œç„¶åé€æ­¥å®Œå–„å…¶ä»–æ¨¡å—

**ç³»ç»Ÿè¯„ä»·**: ğŸŒŸğŸŒŸğŸŒŸğŸŒŸâ­ (4/5æ˜Ÿ) - æ ¸å¿ƒåŠŸèƒ½æ‰å®ï¼Œéœ€è¡¥å……å®Œæ•´æ€§ 